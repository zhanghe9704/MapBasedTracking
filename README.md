## Map_Based_Tracking Lib

### Announcement

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

### About the code

This code loads the truncated transfer map generated by MAD-X or COSY Infinity 9.x and tracks the motion of a particle, given the coordinates of the particle. The users can choose to directly apply the map for tracking or to perform symplectic tracking. The methodology of the symplectic tracking follows _Symplectic Tracking in Circular Accelerators with High Order Maps_ by Martin Berz in "Nonlinear Problems in Future Particle Accelerators" (1991) 288-296, World Scientific. 

### How to compile

The following process is tested in Ubuntu 18.04 in Windows 10 Subsystem for Linux (WSL) environment. 

To compile the source file, a gcc compiler that supports C++ 11 is needed. A Makefile is provides. Assume the repository into $HOME/MapBasedTracking. Enter this directory and run 

```shell
make
```

A shared lib named "libmap_tracking.so" will be created. 

### How to compile and run the examples

Enter the directory $HOME/MapBasedTracking/examples and run

```shell
make
```

Two executable files, example\_01 and example\_02 will be created. To run the examples, two shared libs are needed. One is "libmap_tracking.so", which is created by the source code (see above). The other one is "libtpsaso.so". See how to create it [here](https://github.com/zhanghe9704/tpsa). Copy the two libs into the "examples" folder. 

The example_01 reads a 4D map generated by COSY Infinity 9.x and then applies both the map tracking and symplectic tracking. "4D\_2ndOrder_COSY.txt" is the input file for example\_01. "track\_truncated\_map\_cosy.txt" and "track\_symplectic\_type\_1\_cosy.txt" are the outputs from example\_01. With both the libs and the input file ready, run it by 

```shell
./example_01
```

The example_02 reads a 6D map generated by MAD-X and then applies both the map tracking and symplectic tracking. "6D\_2ndOrder_MADX.txt" is the input file for example\_02. "track\_truncated\_map\_madx.txt" and "track\_symplectic\_type\_2\_madx.txt" are the outputs from example\_02. With both the libs and the input file ready, run it by 

```shell
./example_02
```

The file "track.plt" plots the results using gnuplot. 

### Contact

Contact the author by hezhang.AT.jlab.org.

